<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>STOK ML AUTO EDIT</title>
<style>
body{
  margin:0;
  background:#0b1220;
  color:#fff;
  font-family: Arial, sans-serif;
  text-align:center;
}
canvas{max-width:100%; border-radius:12px;}
input,button{
  width:90%;
  padding:12px;
  margin:6px 0;
  font-size:16px;
}
button{
  background:#00ff9c;
  border:none;
  font-weight:bold;
}
</style>
</head>
<body>

<h2>STOK ML AUTO EDIT</h2>

<input type="file" id="img1" accept="image/*">
<input type="file" id="img2" accept="image/*">

<input id="harga" placeholder="Harga (contoh: 125.000)">
<input id="emblem" placeholder="Emblem (MAX)">
<input id="hero" placeholder="Hero (FULL)">
<input id="mcore" placeholder="Mcore (57)">
<input id="allskin" placeholder="All Skin (209)">
<input id="rank" placeholder="Rank (GLRY 52)">

<button onclick="render()">EDIT</button>
<button onclick="save()">SIMPAN KE GALERI</button>

<canvas id="cv" width="1080" height="1350"></canvas>

<script>
const cv = document.getElementById("cv");
const ctx = cv.getContext("2d");
const template = new Image();
template.src = "https://res.cloudinary.com/dtdodhqqi/image/upload/v1767374406/Proyek_Baru_277_4043A46_o4aeuu.png";

function clipImage(img, x, y, w, h){
  ctx.save();
  ctx.beginPath();
  ctx.roundRect(x,y,w,h,20);
  ctx.clip();
  ctx.drawImage(img,x,y,w,h);
  ctx.restore();
}

function render(){
  ctx.clearRect(0,0,1080,1350);
  ctx.drawImage(template,0,0,1080,1350);

  const i1 = document.getElementById("img1").files[0];
  const i2 = document.getElementById("img2").files[0];

  if(i1){
    const img = new Image();
    img.onload=()=>clipImage(img,120,230,400,220);
    img.src=URL.createObjectURL(i1);
  }
  if(i2){
    const img = new Image();
    img.onload=()=>clipImage(img,560,230,400,220);
    img.src=URL.createObjectURL(i2);
  }

  ctx.textAlign="center";
  ctx.fillStyle="#fff";
  ctx.font="bold 60px Arial";
  ctx.fillText("IDR "+harga.value,540,530);

  ctx.font="bold 34px Arial";
  ctx.fillText(emblem.value,260,980);
  ctx.fillText(hero.value,260,1040);
  ctx.fillText(mcore.value,820,980);
  ctx.fillText(allskin.value,820,1040);

  ctx.font="bold 40px Arial";
  ctx.fillText(rank.value,540,1090);
}

function save(){
  const a=document.createElement("a");
  a.download="hasil-edit.png";
  a.href=cv.toDataURL("image/png");
  a.click();
}
</script>

</body>
</html>
